% puml.tex
\usepackage{graphicx}
\usepackage{ifthen}

% \embedpuml[<scale>]{<basename>}
%   • <scale>: optional scaling factor (default 1.0)
%   • <basename>: path without extension (may be nested, e.g., a/b)
\newcommand{\embedpuml}[2][1.0]{%
% Build assets only if sources are newer than targets to avoid latexmk loops
    \immediate\write18{%
      sh -lc 'scripts/embedpuml.sh "#2"'%
    }%
% Include the generated PDF
    \includegraphics[scale=#1]{#2.pdf}%
}
