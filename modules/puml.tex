% puml.tex

% \embedpuml[<scale>]{<basename>}
%   • <scale>: optional scaling factor (default 1.0)
%   • <basename>: path without extension (may be nested, e.g., a/b)
\newcommand{\embedpuml}[2][1.0]{%
  \directlua{local m=require("scripts.embedpuml"); local pdf=m.build("#2"); if pdf then tex.sprint([[\string\includegraphics[scale=]] .. tostring(#1) .. [[]{]] .. pdf .. [[}]]) end}%
}
