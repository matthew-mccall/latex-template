% embeddot.tex
\usepackage{graphicx}

% \embeddot[<scale>]{<basename>}
%   • <scale>: optional scaling factor (default 1.0)
%   • <basename>: path without extension (may be nested, e.g., a/b)
\newcommand{\embeddot}[2][1.0]{%
  \directlua{local m=require("scripts.embeddot"); local pdf=m.build("#2"); if pdf then tex.sprint([[\string\includegraphics[scale=]] .. tostring(#1) .. [[]{]] .. pdf .. [[}]]) end}%
}
